<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>永城一高2023级高三分班查询系统</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Microsoft YaHei",sans-serif}
body{background:#f2f2f2}
.sub_top{height:44px;line-height:44px;background:#0066cc;color:#fff;display:flex;padding:0 10px}
.title{flex:1;font-weight:bold;font-size:18px}
.back a{color:#fff;text-decoration:none}
.main{background:#fff;margin:10px;padding:10px;border-radius:6px}
.txts{width:100%;padding:8px 6px;font-size:16px;border:1px solid #ccc;border-radius:4px;margin-bottom:12px}
.buts{width:100%;padding:10px 0;font-size:16px;background:#0066cc;color:#fff;border:none;border-radius:4px;cursor:pointer}
.startBtn{background:#28a745}
.so_boxex{font-size:14px;color:#666;text-align:center;margin-top:20px}
.equation{font-size:16px;text-align:center;margin:12px 0;color:#333}
</style>
</head>
<body>
<div class="sub_top">
  <div class="back"><a href="javascript:history.back()">返回</a></div>
  <div class="title">永城一高2023级高三分班查询系统</div>
</div>

<div class="main">
  <input id="name" class="txts" placeholder="请输入姓名" maxlength="20">
  <button id="startBtn" class="buts startBtn">开始解方程</button>
  <div class="equation"><span id="eq"></span></div>
  <input id="ans" class="txts" placeholder="请输入方程的解，两解用中文逗号隔开，例如1，2">
  <button class="buts" onclick="query()">立即查询</button>
  <div class="so_boxex">免责声明：本系统通过记录解方程所需时间，划定班级类型，班级序号为随机生成。仅供娱乐，查询结果与实际分班无关，请勿当真！</div>
</div>

<script>
let ans,start;
const $=id=>document.getElementById(id);
const gen=()=>{
  const [x1,x2]=[0,0].map(()=>Math.floor(Math.random()*11)-5);
  ans=[x1,x2].sort((a,b)=>a-b);
  $('eq').textContent=`请解方程：x²${-(x1+x2)>=0?'+':''}${-(x1+x2)}x${x1*x2>=0?'+':''}${x1*x2}=0`;
};
$('startBtn').onclick=()=>{
  gen();
  start=Date.now();
  $('startBtn').disabled=true;
  $('startBtn').textContent='计时中…';
};
function query(){
  if(!start) return alert('请先点击“开始解方程”按钮！');
  const name=$('name').value.trim();
  const user=$('ans').value.trim().split('，').map(Number).sort((a,b)=>a-b);
  if(ans.length!==user.length||!ans.every((v,i)=>v===user[i])) return alert('方程解错了哦，再想想～');
  const t=(Date.now()-start)/1e3;
  const pool=t<=30?[...Array(8).keys()].map(i=>i+5).concat([...Array(8).keys()].map(i=>i+28))
                :[...Array(15).keys()].map(i=>i+13).concat([...Array(15).keys()].map(i=>i+36));
  const cls=pool[Math.floor(Math.random()*pool.length)];
  document.write(`<!doctype html><title>分班结果(仅供娱乐)</title><style>body{display:flex;justify-content:center;align-items:center;height:100vh;background:#f2f2f2;font-family:sans-serif}.box{background:#fff;padding:30px 50px;border-radius:8px;font-size:20px}</style><div class="box">${name}，恭喜你被分入${cls}班（${t<=30?'加强班':'普通班'}）</div>`);
  document.close();
}
</script>
</body>
</html>
